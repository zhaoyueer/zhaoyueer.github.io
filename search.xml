<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2020/06/15/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>fetch</title>
    <url>/2020/06/15/fetch/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>唤端</title>
    <url>/2020/06/22/app-to-app/</url>
    <content><![CDATA[<h1 id="唤端"><a href="#唤端" class="headerlink" title="唤端"></a>唤端</h1><p>app之间的跳转简称唤端。</p>
<h1 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h1><h2 id="URL-Scheme"><a href="#URL-Scheme" class="headerlink" title="URL Scheme"></a>URL Scheme</h2><p>scheme 标示资源访问的方式。常见的scheme有http/https/ftp等。而在IOS/Andriod中，scheme相当于用哪个app打开URL。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">"tel://18511111111"</span> /&gt; <span class="comment">// IOS中唤起拨号程序</span></span><br></pre></td></tr></table></figure>

<h4 id="Scheme-注册"><a href="#Scheme-注册" class="headerlink" title="Scheme 注册"></a>Scheme 注册</h4><p>需要在app里事先向系统注册自己的Scheme，才能让app通过Scheme方式唤起。</p>
<p><strong>系统只负责根据Scheme唤起对应的app，至于打开app之后的行为，需要app解析URL参数作出相应处理</strong></p>
<h4 id="适用性"><a href="#适用性" class="headerlink" title="适用性"></a>适用性</h4><p>不适应Android的Chrome及基于Chrome内核浏览器直接访问</p>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>兼容性好</p>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>无法准确判断是否唤起成功。</li>
<li>如果用户没有安装对应的app，那么尝试跳转后在浏览器中会没有任何反应。甚至在一些webview里还会跳到一个类似 <strong>无法打开xxxx</strong> 这样的错误页面或者错误弹窗。</li>
<li>在很多浏览器和webview中会有一个弹窗提示是否打开对应app，会导致用户流失。</li>
<li>有URL Scheme劫持风险。比如某不知名app也向系统注册了 <code>xxx://</code> 这个scheme，唤起流量可能就会被劫持到这个app里。</li>
<li>很容易被屏蔽，app很容易拦截掉通过URL Scheme发起的跳转。</li>
</ul>
<h2 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h2><p>谷歌定制版的URL Scheme。本质与URL Scheme区别不大，<a href="https://developer.chrome.com/multidevice/android/intents?spm=ata.13261165.0.0.d54f54a3toRfWr" target="_blank" rel="noopener">构造链接</a>方式不同。</p>
<h4 id="适用性-1"><a href="#适用性-1" class="headerlink" title="适用性"></a>适用性</h4><p>仅Android的Chrome及基于Chrome内核浏览器。</p>
<h2 id="Universal-Link"><a href="#Universal-Link" class="headerlink" title="Universal Link"></a>Universal Link</h2><p>IOS 9 中引入的功能，可以直接通过https协议的链接来打开app，如果没有安装则打开对应h5页面。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;a href=<span class="string">"https://xxxx"</span> /&gt;</span><br></pre></td></tr></table></figure>

<h4 id="注册"><a href="#注册" class="headerlink" title="注册"></a><a href="https://developer.apple.com/library/archive/documentation/General/Conceptual/AppSearch/UniversalLinks.html?spm=ata.13261165.0.0.6a9072d111Nj92" target="_blank" rel="noopener">注册</a></h4><ul>
<li>app 中注册自己要支持的域名</li>
<li>在自己域名的根目录下配置一个 apple-app-site-associatio 文件。</li>
</ul>
<h4 id="适用性-2"><a href="#适用性-2" class="headerlink" title="适用性"></a>适用性</h4><p>只在IOS 9 以上</p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ul>
<li>唤端时没有弹窗提示，可减少一部分用户流失</li>
<li>对于没有安装应用的用户，点击链接就会直接打开对应的页面，可引导到中转页，一定程度解决URL Scheme无法判断唤端失败问题。</li>
</ul>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>只能在IOS 上用</li>
<li>只能由用户主动触发。比如浏览器扫码打开页面，没有办法由页面直接唤起app，需要用户手动点击页面按钮才能唤起。</li>
</ul>
<h2 id="App-Links"><a href="#App-Links" class="headerlink" title="App Links"></a><a href="https://developer.android.com/training/app-links#add-app-links" target="_blank" rel="noopener">App Links</a></h2><p>安卓版的Universal Link。</p>
<h2 id="wx-launchApplication"><a href="#wx-launchApplication" class="headerlink" title="wx.launchApplication"></a>wx.launchApplication</h2><p>微信JSSDK隐藏API。</p>
<h4 id="适用性-3"><a href="#适用性-3" class="headerlink" title="适用性"></a>适用性</h4><p>IOS，Android 微信浏览器环境。仅限腾讯系50个应用白名单，微信版本大于6.5.16</p>
<p><strong>在微信环境下，URL Scheme会被拦截，无法唤起应用。Universal Link/App Links均无效。</strong></p>
<h2 id="H5唤端兼容"><a href="#H5唤端兼容" class="headerlink" title="H5唤端兼容"></a>H5唤端兼容</h2><h4 id="iframe"><a href="#iframe" class="headerlink" title="iframe"></a>iframe</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> iframe = <span class="built_in">document</span>.createElement(<span class="string">'iframe'</span>);</span><br><span class="line">iframe.frameborder = <span class="string">'0'</span>;</span><br><span class="line">iframe.style.cssText = <span class="string">'display: none;border: none;width: 0;height: 0'</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(iframe);</span><br><span class="line">iframe.src = <span class="string">'zhihu://xxx'</span></span><br></pre></td></tr></table></figure>
<p>即使没有安装app，当前页面也不会跳转到错误的页面</p>
<h4 id="a标签"><a href="#a标签" class="headerlink" title="a标签"></a>a标签</h4><p>IOS 9 以上safari中，不支持iframe唤起，可以用a标签，并模拟点击事件</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</span><br><span class="line">a.setAttribute(<span class="string">'href'</span>, url);</span><br><span class="line">a.style.display = <span class="string">'none'</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(a);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> e = <span class="built_in">document</span>.createEvent(<span class="string">'HEMLEvents'</span>);</span><br><span class="line">e.initEvent(<span class="string">'click'</span>, <span class="literal">false</span>, <span class="literal">false</span>);</span><br><span class="line">a.dispatchEvent(e);</span><br></pre></td></tr></table></figure>

<h4 id="window-location"><a href="#window-location" class="headerlink" title="window.location"></a>window.location</h4><p>对于Intent和Universal Link，App Links可以直接设置window.location.href方式跳转，即使没有安装app也不会跳转到错误页面。</p>
<h1 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (isWeixin) &#123;</span><br><span class="line">    <span class="keyword">if</span> (weixinVersion &gt;= <span class="number">7.0</span><span class="number">.12</span>) &#123;</span><br><span class="line">        wx-open-launch-app <span class="comment">// https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (weixinVersion &gt;= <span class="number">6.5</span><span class="number">.16</span> &amp;&amp; HOST_WHITE) &#123;</span><br><span class="line">        wx.launchApplication</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 引导浏览器打开页面</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isIOS) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isIOSVersion &gt;= <span class="number">9</span>) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href = Universal Link</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        iframe.src = URL Scheme</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (isAndroid) &#123;</span><br><span class="line">    <span class="keyword">if</span> (isChrome) &#123;</span><br><span class="line">        <span class="built_in">window</span>.location.href = Intent</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        iframe.src = URL Scheme</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a href="https://juejin.im/post/5eeb785251882565a762e50f" target="_blank" rel="noopener">揭秘手淘召唤术</a></p>
]]></content>
      <tags>
        <tag>h5，mobile</tag>
      </tags>
  </entry>
</search>
